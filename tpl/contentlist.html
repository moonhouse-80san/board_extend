<!--%import("./css/buttonset.css")-->
<!--%import("./js/modify_document.js")-->
<!--#include("header.html")-->
<h4>ìˆœì„œë³€ê²½ ê¸°ëŠ¥ì€, ë¬¸ì„œì¶œë ¥ ìˆœì„œì„¤ì •ì´ "ë¬¸ì„œë²ˆí˜¸" "ë‚´ë¦¼ì°¨ìˆœ"ì¸ê²½ìš°ì—ë§Œ ë™ì‘í•˜ê³ , ë‹¤ë¥¸í˜ì´ì§€ì˜ ë¬¸ì„œì™€ ìœ„ì¹˜ê°€ ë³€ê²½ë  ìˆ˜ ì—†ìŠµë‹ˆë‹¤..</h4>
<p>DBì— ì ‘ê·¼í•˜ì§€ì•Šê³ ì„œ ìˆ˜ì •ì´ ë¶ˆê°€ëŠ¥í•œ ë¶€ë¶„ì„ ë°˜ì˜í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì¤ë‹ˆë‹¤.</p>
<table border="0" cellspacing="0" summary="" class="rowTable">
	<caption>í•œë²ˆì— ë³¼ ë¬¸ì„œê°¯ìˆ˜ : <input type="text" name="list_count" value="{$list_count}" style="margin-top:5px;"/>
	<input type="button" style="height:26px; line-height:26px; padding:0 10px; font-size:11px; box-sizing:border-box; vertical-align:middle; margin-top:-5px;" value="ì ìš©" onclick="document.location.href = current_url.setQuery('list_count',jQuery(this).prev().val());" /></caption>
	<thead>
	<tr>
		<th>ë²ˆí˜¸</th>
		<th>ì œëª©</th>
		<th>ì¡°íšŒìˆ˜</th>
		<th>ì¶”ì²œìˆ˜</th>
		<th>ì‘ì„±ì¼ (yyyymmddhhiiss)</th>
		<th>ìˆ˜ì •ì¼ (yyyymmddhhiiss)</th>
		<th>ìˆœì„œë²ˆí˜¸</th>
		<th>ë°˜ì˜</th>
		<th>ë‹¤ìš´ë¡œë“œ ìˆ˜</th>
	</tr>
	</thead>
	<tbody>
	<!--// ê²Œì‹œë¬¼ì´ ì—†ìœ¼ë©´ ë“±ë¡ëœ ê¸€ì´ ì—†ìŒì„ í‘œì‹œ -->
	<!--@if(!$document_list)-->
	<tr class="bg0 tCenter">
		<td colspan="9" class="title">
			ê²Œì‹œê¸€ì´ ì—†ìŠµë‹ˆë‹¤.
		</td>
	</tr>
	<!--@else-->
		{@ $first=true}
		<!--// ì¼ë°˜ ê¸€ ì¶œë ¥ -->
		<tr loop="$document_list => $no,$document" class="bg{($no+1)%2+1}" style="border:1px solid #e0e0e0;"<!--@if($document_srl == $document->document_srl)-->"background-color:#ddd;"<!--@endif-->>
			<td class="num" style="padding-left:10px;"><!--@if($document_srl == $document->document_srl)--><img src="images/iconArrowD8.gif" border="0" alt="" /><!--@else-->{$no}<!--@end--></td>
			<td class="title">
				<!--@if($grant->manager)-->
					<!--@if($no!=1)-->
					<a href="#" onclick="moveDocument('{$document->document_srl}','down','{$no}'); return false;" class="buttonSet buttonDown"><span>ì•„ë˜ë¡œ</span></a>
					<!--@end-->
					<!--@if($first==false)-->
						<a href="#" onclick="moveDocument('{$document->document_srl}','up','{$no}'); return false;" class="buttonSet buttonUp"><span>ìœ„ë¡œ</span></a>
					<!--@else-->
						{@ $first=false}
					<!--@end-->
				<!--@end-->
				<a href="{getUrl('document_srl',$document->document_srl, 'listStyle', $listStyle, 'cpage','')}">{$document->getTitle($module_info->subject_cut_size)}</a>{$document->printExtraImages(60*60*$module_info->duration_new)}
			</td>
			<td class="reading"><input type="text" style="width:50px;" class="readed_count_{$document->document_srl}" value="{$document->get('readed_count')}" /></td>
			<td class="recommend"><input type="text" style="width:50px;" class="voted_count_{$document->document_srl}" value="{$document->get('voted_count')}" /></td>
			<td class="date"><input type="text" style="width:120px;" class="regdate_{$document->document_srl}" value="{$document->get('regdate')}" /></td>
			<td class="date"><input type="text" style="width:120px;" class="last_update_{$document->document_srl}" value="{$document->get('last_update')}" /></td>
			<td><input type="text" style="width:80px;" class="list_order_{$document->document_srl}" list_order="{$document->get('list_order')}" id="{$no}_order" value="{$document->get('list_order')}" /></td>
			<td style="padding-left:10px"><span class="btn" style="margin-top:-8px;"><input type="button" style="height:26px; line-height:26px; padding:0 10px; font-size:11px; box-sizing:border-box; vertical-align:middle;" onclick="applyModify('{$document->document_srl}')" value="ìˆ˜ì •ë°˜ì˜" /></span></td>

			<!-- ë‹¤ìš´ë¡œë“œ ìˆ˜ ì»¬ëŸ¼ -->
			<td style="padding:10px 10px 0 10px;">
				<!--@if($document->uploaded_files && count($document->uploaded_files) > 0)-->
					<!--@foreach($document->uploaded_files as $idx => $file)-->
						<div style="margin-bottom:8px; padding:5px; background:#f9f9f9; border-radius:3px; border:1px solid #e0e0e0;">
							<div style="margin-bottom:3px; font-size:12px;">
								ğŸ“ <strong>{$file->source_filename}</strong>
							</div>
							<div style="padding-left:15px; font-size:11px; display:inline-flex; align-items:center; gap:6px;">
								í˜„ì¬: <span style="color:#666;">{$file->download_count}íšŒ</span>
								â†’
								<input type="number" id="download_{$file->file_srl}" value="{$file->download_count}" min="0" style="width:60px; height:26px; line-height:26px; margin-top:10px; padding:10px 6px; font-size:11px; border:1px solid #ddd; border-radius:3px; box-sizing:border-box; vertical-align:middle;" />
								<button type="button" onclick="updateDownloadCount('{$file->file_srl}')" style="height:26px; line-height:26px; padding:0 10px; font-size:11px; cursor:pointer; background:#5c7cfa; color:white; border:none; border-radius:3px; box-sizing:border-box; vertical-align:middle;">ë³€ê²½</button>
							</div>
						</div>
					<!--@end-->
				<!--@else-->
					<span style="color:#999; font-size:11px;">ì´ë¯¸ì§€ or ë™ì˜ìƒíŒŒì¼å¤– ì—†ìŒ</span>
				<!--@end-->
			</td>
		</tr>
	<!--@end-->
	</tbody>
</table>
	
<div class="pagination a1">
	<a href="{getUrl('page','','document_srl','','division',$division,'last_division',$last_division,'entry','')}" class="prevEnd">{$lang->first_page}</a> 
	<!--@while($page_no = $page_navigation->getNextPage())-->
		<!--@if($page == $page_no)-->
			<strong>{$page_no}</strong> 
		<!--@else-->
			<a href="{getUrl('page',$page_no,'document_srl','','division',$division,'last_division',$last_division,'entry','')}">{$page_no}</a>
		<!--@end-->
	<!--@end-->
	<a href="{getUrl('page',$page_navigation->last_page,'document_srl','','division',$division,'last_division',$last_division,'entry','')}" class="nextEnd">{$lang->last_page}</a>
</div>

<script>
	function updateDownloadCount(file_srl) {
		var input = document.getElementById('download_' + file_srl);
		var download_count = input.value;
		
		if(!download_count || download_count < 0) {
			alert('ì˜¬ë°”ë¥¸ ìˆ«ìë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
			return false;
		}
		
		if(!confirm('ë‹¤ìš´ë¡œë“œ ìˆ˜ë¥¼ ' + download_count + 'íšŒë¡œ ë³€ê²½í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
			return false;
		}
		
		var params = {
			file_srl: file_srl,
			download_count: download_count
		};
		
		exec_xml(
			'board_extend',
			'procBoard_extendAdminFileDownload',
			params,
			function(ret_obj) {
				alert(ret_obj.message);
				if(ret_obj.error == '0' || ret_obj.error == 0) {
					location.reload();
				}
			}
		);
		
		return false;
	}
</script>